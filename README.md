# WC_IST

Репозиторий проекта источника сварочного тока (MFDC) на STM32G474: **прошивка/код платы + документация**.

Сейчас в репозитории в основном документация; код прошивки будет добавляться сюда по мере разработки.

Главная идея: **источник правды — в `docs/`**, а не “в переписке/памяти”. Перед изменениями в коде/железе/таймингах сначала обновляются и/или проверяются документы (см. `docs/PROJECT_CONTEXT.md`).

## Быстрый старт

1) Onboarding / как читать документы и формулировать задачи: `docs/HOW_TO_USE_RU.md`.
2) Навигация по документации: `docs/README.md` и `docs/DOCS_INDEX.md`.
3) Ground Truth (железо/тайминги/safe state): `docs/PROJECT_CONTEXT.md`.
4) Термины: `docs/GLOSSARY.md`.
5) Архитектура (fast/slow домены, тестируемость): `docs/ARCHITECTURE.md`.
6) Safety (классы аварий, latch/recovery, shutdown-path): `docs/SAFETY.md`.
7) Протокол обмена с ТК (CAN): `docs/protocols/PROTOCOL_TK.md`.
8) Протокол “плата ↔ ПК” по USB-UART (PCcom4): `docs/protocols/PCCOM4.02.md`.
9) Верификация/минимальная регрессия: `docs/TEST_PLAN.md`.

Для запросов к Codex/LLM по умолчанию используйте короткий контекст: `docs/CONTEXT_SNAPSHOT.md`.

## Структура репозитория

- `docs/` — документация (источники правды, архитектура, safety, протокол, тест-план и “глубокие” материалы).
- `skills/` — локальные правила/шаблоны для работы с Codex/LLM (если используются в вашей среде).
- `AGENTS.md` — правила работы Codex/LLM в этом репозитории.
- `.editorconfig` — требования по кодировке/концам строк (ориентир: UTF‑8 + CRLF).

## Принципы изменений (коротко)

- Если изменение затрагивает железо/тайминги/safe state/аварии/протокол — сперва свериться с `docs/PROJECT_CONTEXT.md` и связанными документами (см. `docs/README.md`).
- Для safety/таймингов обязательны измеримые доказательства и сценарии fault‑injection (см. `docs/SAFETY.md` и `docs/TEST_PLAN.md`).
