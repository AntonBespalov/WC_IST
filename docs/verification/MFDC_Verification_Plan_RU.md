
# Formal Verification Plan
## Источник сварочного тока MFDC

---

## 1. Цель верификации

Доказать, что система:
- управляет током предсказуемо;
- переходит в безопасное состояние при любой допустимой неисправности;
- не допускает неконтролируемой подачи энергии.

---

## 2. Уровни верификации

### L0 — Статический анализ
- предупреждения компилятора;
- статический анализ;
- code review.

### L1 — Unit tests
- PI-регулятор;
- фильтры;
- state machine.

### L2 — SIL
- логика управления;
- диагностика;
- тайминги (логические).

### L3 — HIL
- реальные тайминги;
- аппаратные fault-линии;
- DMA / SPI / ADC.

### L4 — Ограниченный силовой стенд
- коммутация;
- драйверы;
- помехи.

### L5 — Приёмочные испытания
- реальные режимы сварки;
- тепловая стабильность.

---

## 3. Общие критерии PASS / FAIL

- выходы ШИМ отключаются при аварии;
- время реакции не превышает заданного;
- статус ошибки фиксируется однозначно.

---

## 4. SIL-верификация

### 4.1 Метрики

- перерегулирование;
- время установления;
- устойчивость;
- отсутствие NaN/overflow.

### 4.2 Отказные сценарии

- обрыв/КЗ датчика;
- клип измерения;
- таймаут связи.

---

## 5. HIL-верификация

### 5.1 Safety-кейсы

- fault драйвера → PWM off;
- CAN timeout → safe state;
- зависание fast loop.

---

## 6. Верификация на силовом стенде

- dead-time;
- shoot-through prevention;
- восстановление после fault.

---

## 7. Критерии завершения

Система допускается к эксплуатации только после успешного прохождения всех уровней.

---
