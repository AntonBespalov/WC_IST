# FMEA-lite — MFDC источник сварочного тока

**Документ:** FMEA-001  
**Объект:** Источник MFDC (контур тока)  
**Версия:** 1.0  
**Дата:** 2026-01-29  

---

## Обозначения

- S (Severity) — тяжесть последствий: 1 (низкая) … 5 (критическая)
- O (Occurrence) — вероятность: 1 (редко) … 5 (часто)
- D (Detection) — обнаруживаемость: 1 (легко) … 5 (трудно)
- RPN = S × O × D

---

## 1. Отказы измерения тока (катушка Роговского)

### 1.1. Обрыв / потеря сигнала

- **Причина:** обрыв кабеля, отказ интегратора
- **Эффект:** I_meas ≈ 0 → регулятор увеличивает u
- **Последствие:** аварийный ток, аппаратная защита
- **S:** 5 | **O:** 2 | **D:** 2 | **RPN:** 20
- **Контрмеры:**
  - детект отсутствия обновления ADC;
  - контроль диапазона;
  - немедленный FAULT + PWM off.

---

### 1.2. Дрейф нуля интегратора

- **Причина:** температурный дрейф, насыщение ОУ
- **Эффект:** систематическая ошибка тока
- **Последствие:** неправильная энергия сварки
- **S:** 4 | **O:** 3 | **D:** 3 | **RPN:** 36
- **Контрмеры:**
  - авто-рецентровка в известных состояниях;
  - контроль среднего значения.

---

## 2. Отказы измерения Udc

### 2.1. Ложное занижение Udc

- **Причина:** АЦП, делитель, помехи
- **Эффект:** рост u_ff
- **Последствие:** насыщение, потеря управления
- **S:** 4 | **O:** 2 | **D:** 3 | **RPN:** 24
- **Контрмеры:**
  - ограничение u_ff;
  - флаг UDC_LOW;
  - переход в safe-state.

---

## 3. Насыщение управления

### 3.1. Длительное насыщение u_max

- **Причина:** низкое Udc, плохой контакт
- **Эффект:** ток не растёт
- **Последствие:** деградация качества сварки
- **S:** 3 | **O:** 4 | **D:** 2 | **RPN:** 24
- **Контрмеры:**
  - LIMIT_HI;
  - TRACKING_BAD;
  - реакция ТК.

---

## 4. CAN-связь

### 4.1. Потеря команд

- **Причина:** перегрузка шины, обрыв
- **Эффект:** устаревшая уставка
- **Последствие:** неконтролируемый процесс
- **S:** 5 | **O:** 2 | **D:** 1 | **RPN:** 10
- **Контрмеры:**
  - soft-timeout → спад тока;
  - hard-timeout → FAULT.

---

### 4.2. Повторы / пропуски seq

- **Причина:** ошибки ТК, CAN
- **Эффект:** дрожание уставки
- **Последствие:** нестабильный ток
- **S:** 3 | **O:** 3 | **D:** 2 | **RPN:** 18
- **Контрмеры:**
  - контроль seq;
  - публикация seq_applied.

---

## 5. Временные нарушения

### 5.1. Джиттер измерения

- **Причина:** ISR перегружен
- **Эффект:** шум управления
- **Последствие:** колебания тока
- **S:** 4 | **O:** 2 | **D:** 3 | **RPN:** 24
- **Контрмеры:**
  - минимальный fast ISR;
  - мониторинг latency.

---

## 6. Итог

Наибольший риск несут:
- отказ измерения тока;
- дрейф нуля;
- длительное насыщение без реакции ТК.

Эти отказы **MUST** быть закрыты архитектурно, а не коэффициентами регулятора.
