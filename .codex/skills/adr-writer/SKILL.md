---
name: adr-writer
version: 0.1.0
description: >
  Оформление архитектурного решения (ADR) в репозитории: варианты, критерии выбора,
  последствия/риски и план доказательств. Цель — фиксировать решения так, чтобы их можно было
  ревьюить, воспроизводить и пересматривать при изменении предпосылок.
tags: ["architecture","adr","decision-record","requirements","documentation"]
project_context: "docs/PROJECT_CONTEXT.md"
glossary: "docs/GLOSSARY.md"
when_to_use:
  - "когда нужно принять архитектурное решение или выбрать вариант реализации"
  - "когда есть 2+ правдоподобных подхода и важны критерии выбора"
  - "когда решение влияет на интерфейсы, тайминги, safety-политику или протоколы"
outputs:
  - "ADR draft в формате Markdown по шаблону docs/decisions/ADR-TEMPLATE.md"
---

# Skill: ADR writer (Architecture Decision Record)

## Миссия
Фиксировать архитектурные решения так, чтобы было видно:
1) какие были варианты,
2) по каким критериям выбран текущий,
3) какие риски/последствия принимаем,
4) чем проверяем корректность и безопасность.

## Вход (что запросить у пользователя, если не дано)
- Тема решения (1 строка).
- Контекст: какие модули/домены/интерфейсы затрагиваем.
- Ограничения: что нельзя ломать (совместимость/тайминги/safety).
- Варианты (минимум 2) или разрешение предложить варианты самостоятельно.
- Что считается “готово”: критерии приёмки + evidence (tests/измерения/лог).

Если данных не хватает — задать 1–3 коротких вопроса и дождаться ответа.

## Процесс
1) Сформулировать проблему/контекст (без “воды”, 5–10 строк).
2) Сгенерировать варианты (A/B/C) и критерии выбора.
3) Принять решение и явно указать **почему не другие**.
4) Описать последствия/риски и как их мониторить.
5) Сформировать план доказательств (tests/proof/evidence) и план отката.
6) В конце вывести ADR целиком как готовый Markdown-файл.

## Контракт ответа
Выводить:
- имя файла (предлагаемое) вида `docs/decisions/ADR-YYYYMMDD-<slug>.md`
- полный текст ADR в Markdown **строго по структуре** `docs/decisions/ADR-TEMPLATE.md`

## Нельзя
- Подменять ADR “реализационными деталями” без решения и критериев.
- Писать “должно работать” без измеримых критериев и плана доказательств.
- Переопределять термины: использовать определения из `docs/GLOSSARY.md`.

